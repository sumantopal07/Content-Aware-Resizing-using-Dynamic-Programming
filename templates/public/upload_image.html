{% extends "public/templates/public_template.html" %}

{% block title %}Upload{% endblock %}

{% block main %}

<div class="container">
    <div class="row">
        <div class="col">

            <h1>Smart Image Cropping</h1>
            <hr>

            <form action="/upload_image" method="POST" enctype="multipart/form-data">

                <div class="form-group">
                    <label>Select image</label>
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" name="image" id="image" oninput="filesize(this);">
                        <label class="custom-file-label" for="image" id="DDD">Select image..</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="uk-form-label">Scale</div>
                    <select class="uk-select" id="scale" name="scale">
                        <option value="0.75">0.75</option>
                        <option value="0.25">0.25</option>
                        <option value="0.3">0.3</option>
                        <option value="0.5">0.5</option>
                        <option value="0.8">0.8</option>
                        <option value="0.9">0.9</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="uk-form-label">orientation</div>
                    <select class="uk-select" id="orientation" name="orientation">
                        <option value="r">row-wise</option>
                        <option value="c">col-wise</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary">Upload</button>

            </form>
            <center>
                <h3></h3>
            </center>

        </div>
    </div>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js" ></script>
<script type="text/javascript" charset="utf-8" >
    console.log("I've been clicked!!");
    var socket = io.connect("http://localhost:5000/");
    const x = document.querySelector("h3");
    socket.on('connect', function () {
        console.log("Connection Made");
        socket.emit("wwww");
    });
    socket.on('haha', (i) => {
        x.innerHTML=i;
    })
    function filesize(elem) {
        document.cookie = `filesize=${elem.files[0].size}`
    }
</script>

{% endblock %}